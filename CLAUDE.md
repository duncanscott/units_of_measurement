# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

A data-only repository containing units of measurement in JSONL format. No build system, no application code. The repository ships three JSONL files in `json/`:

- **`units_of_measurement.jsonl`** (2,959 entries) -- the merged superset; this is the primary dataset
- **`si_units.jsonl`** (812 entries) -- SI base/derived units with all 24 prefix expansions
- **`uom.jsonl`** (2,660 entries) -- units parsed from the Rust [uom](https://github.com/iliekturtles/uom) crate with conversion factors

The merged file combines the other two into a unified schema.

## Validation Commands

There is no build step. Validate data quality with:

```sh
# Stream-validate JSONL (requires jq)
jq -c '.' json/units_of_measurement.jsonl > /dev/null
jq -c '.' json/si_units.jsonl > /dev/null
jq -c '.' json/uom.jsonl > /dev/null

# Check for duplicate unit names
python3 -c "
import json, sys
with open('json/units_of_measurement.jsonl') as f:
    seen=set()
    for i,line in enumerate(f,1):
        unit=json.loads(line)['unit']
        if unit in seen: sys.exit(f'duplicate unit {unit} on line {i}')
        seen.add(unit)
"
```

## Schema Differences Between Files

| Field | `units_of_measurement.jsonl` | `si_units.jsonl` | `uom.jsonl` |
|-------|------------------------------|-------------------|-------------|
| `unit` | yes | yes | yes |
| `prefix` | yes (null if none) | yes (null if none) | no |
| `symbol` | yes | yes | yes |
| `plural` | yes | no | yes |
| `property` | yes | yes | yes |
| `conversion_factor` | yes | no | yes |
| `conversion_offset` | only for temperature | no | only for temperature |
| `reference_unit` | yes | no | yes |
| `alternate_unit` | optional array | optional array | no |
| `system` | yes | yes | yes |

## Data Conventions

- Entries are single-line JSON objects sorted lexicographically by `unit`
- Preserve field order as shown in README.md
- US English spellings ("meter", "liter"); variants go in `alternate_unit`
- Symbols are lowercase unless internationally capitalized (e.g., `Pa`, `A`)
- UTF-8 encoding, LF line endings, non-ASCII characters must be escaped
- Temperature conversion formula: `value_in_kelvin = value * conversion_factor + conversion_offset`

## Commit Style

Imperative, single-sentence (e.g., "add Martian gravity units"). Each commit bundles a logically complete dataset change.

## Data Sources

- **`si_units.jsonl`** was composed from the **SI Brochure, 9th Edition** (BIPM). Factual data, no license concern.
- **`uom.jsonl`** was parsed from the Rust **[uom](https://github.com/iliekturtles/uom)** crate by Mike Boutin, dual-licensed MIT / Apache-2.0. The full MIT license is in `THIRD-PARTY-LICENSES`.
- **`units_of_measurement.jsonl`** merges both sources. Entries matched by full unit name + property; SI entries enriched with conversion factors/plurals from uom data; unmatched SI entries got computed conversion factors from prefix multipliers.

## Generation Scripts (in jade-tipi project)

The data files were generated by scripts in the sibling project `/Users/duncanscott/git-hub/duncanscott/jade-tipi/scripts/`:
- `parse_uom.py` — parses all `.rs` files from the uom crate's `src/si/` directory, resolves `prefix!()` macros, classifies units by measurement system, outputs `uom.jsonl`
- `add_reference_unit.py` — identifies the SI coherent base unit (conversion_factor=1.0, no offset) for each property, adds `reference_unit` field
- `merge_units.py` — merges `si_units.jsonl` and `uom.jsonl` into `units_of_measurement.jsonl`, matching entries and computing missing conversion factors

## Discoverability Checklist

Steps to make this project discoverable (work through in order):

### 1. GitHub repository settings
- [ ] Add description: "Comprehensive units of measurement dataset in JSONL — 2,959 units, 121 physical quantities, conversion factors, 11 measurement systems"
- [ ] Add topics: units-of-measurement, unit-conversion, si-units, jsonl, dataset, physics, metrology, open-data, conversion-factors, imperial-units

### 2. Create a GitHub Release
- [ ] Tag v1.0.0 release with release notes summarizing the dataset

### 3. Package registries
- [ ] Publish to npm as a data package
- [ ] Publish to PyPI as a Python data package

### 4. Community sharing
- [ ] Post on Reddit: r/datasets, r/physics, r/programming, r/opensource
- [ ] Post on Hacker News (Show HN)
- [ ] Share on relevant Discord/Slack communities

### 5. Cross-references
- [ ] Open a PR or issue on the uom repo (iliekturtles/uom) mentioning the dataset
- [ ] Add to Awesome Lists (awesome-datasets, awesome-json-datasets)
- [ ] Add to data catalogs (Datahub.io, Kaggle Datasets)

### 6. SEO / documentation
- [ ] Add usage examples (Python, JavaScript) to README showing how to load and query the data
